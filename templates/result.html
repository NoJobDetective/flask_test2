<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>取得結果</title>
    <!-- QRCode.js の読み込み -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* QRコードつきバナーのスタイル */
        .banner {
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
        }
        .banner .left, .banner .center, .banner .right {
            margin: 10px;
        }
        .banner .center {
            text-align: center;
            flex: 1;
        }
        .title {
            font-size: 1.5em;
            font-weight: bold;
        }
        .link {
            font-size: 1em;
            color: blue;
        }
        /* 感想表示エリアのスタイル */
        .comment-section {
            border: 1px solid #ccc;
            padding: 10px;
        }
        .comment-title {
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>取得結果</h1>
    
    <!-- QRコードつきバナー（上部） -->
    <div class="banner">
        {% if metadata.error403 %}
            <div class="left">
                <div class="link">
                    <a href="{{ metadata.url }}" target="_blank">{{ metadata.url }}</a>
                </div>
            </div>
            <div class="right">
                <div id="qrcode"></div>
            </div>
        {% else %}
            <div class="left">
                {% if metadata.image %}
                    <img src="{{ metadata.image }}" alt="サムネイル" width="150">
                {% else %}
                    <!-- サムネイルが取得できなければ表示しない -->
                    <p>サムネイル画像はありません。</p>
                {% endif %}
            </div>
            <div class="center">
                <div class="title">{{ metadata.title }}</div>
                <div class="link">
                    <a href="{{ metadata.url }}" target="_blank">{{ metadata.url }}</a>
                </div>
            </div>
            <div class="right">
                <div id="qrcode"></div>
            </div>
        {% endif %}
    </div>
    
    <!-- 感想表示（下部） -->
    <div class="comment-section">
        <div class="comment-title">感想:</div>
        <div class="comment-content" style="white-space: pre-line;">
            {% if comment %}
                <p>{{ comment }}</p>
            {% else %}
                <p>感想は入力されていません。</p>
            {% endif %}
        </div>
    </div>
    
    <br>
    <a href="{{ url_for('index') }}">戻る</a>
    
    <!-- QRCode.js を利用してQRコードを生成 -->
    <script>
      var qrcode = new QRCode(document.getElementById("qrcode"), {
        text: "{{ metadata.url }}",
        width: 128,
        height: 128,
        colorDark : "#000000",
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.H
      });
    </script>
</body>
</html>
