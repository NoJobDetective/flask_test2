<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>取得結果</title>
    <!-- QRCode.js の読み込み -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        .container {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .left, .center, .right {
            margin: 10px;
        }
        .center {
            text-align: center;
            flex: 1;
        }
        .title {
            font-size: 1.5em;
            font-weight: bold;
        }
        .link {
            font-size: 1em;
            color: blue;
        }
    </style>
</head>
<body>
    <h1>取得結果</h1>
    {% if metadata.error403 %}
    <!-- 403エラーの場合：リンクが左側、QRコードが右側 -->
    <div class="container">
        <div class="left">
            <div class="link">
                <a href="{{ metadata.url }}" target="_blank">{{ metadata.url }}</a>
            </div>
        </div>
        <div class="right">
            <div id="qrcode"></div>
        </div>
    </div>
    {% else %}
    <!-- 通常の場合：サムネイルが左、タイトル＆リンクが中央、QRコードが右側 -->
    <div class="container">
        <div class="left">
            {% if metadata.image %}
                <img src="{{ metadata.image }}" alt="サムネイル" width="150">
            {% else %}
                <p>サムネイル画像が見つかりませんでした。</p>
            {% endif %}
        </div>
        <div class="center">
            <div class="title">{{ metadata.title }}</div>
            <div class="link">
                <a href="{{ metadata.url }}" target="_blank">{{ metadata.url }}</a>
            </div>
        </div>
        <div class="right">
            <div id="qrcode"></div>
        </div>
    </div>
    {% endif %}
    <br>
    <a href="{{ url_for('index') }}">戻る</a>
    
    <!-- QRCode.js を利用してQRコードを生成 -->
    <script>
      var qrcode = new QRCode(document.getElementById("qrcode"), {
        text: "{{ metadata.url }}",
        width: 128,
        height: 128,
        colorDark : "#000000",
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.H
      });
    </script>
</body>
</html>
